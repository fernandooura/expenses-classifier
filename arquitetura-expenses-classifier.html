<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Arquitetura â€” Expenses Classifier</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@400;600&family=IBM+Plex+Sans:wght@300;400;600;700&display=swap');

  :root {
    --bg: #0d0f14;
    --surface: #161920;
    --border: #252932;
    --accent: #f97316;
    --accent2: #3b82f6;
    --accent3: #22c55e;
    --accent4: #a855f7;
    --text: #e2e8f0;
    --muted: #64748b;
    --mono: 'IBM Plex Mono', monospace;
    --sans: 'IBM Plex Sans', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--sans);
    min-height: 100vh;
    padding: 40px 24px 80px;
  }

  header {
    max-width: 900px;
    margin: 0 auto 48px;
  }

  .tag {
    font-family: var(--mono);
    font-size: 11px;
    color: var(--accent);
    letter-spacing: 3px;
    text-transform: uppercase;
    margin-bottom: 12px;
  }

  h1 {
    font-size: 32px;
    font-weight: 700;
    line-height: 1.2;
    margin-bottom: 8px;
  }

  h1 span { color: var(--accent); }

  .subtitle {
    color: var(--muted);
    font-size: 15px;
    font-weight: 300;
  }

  .diagram {
    max-width: 900px;
    margin: 0 auto;
    display: flex;
    flex-direction: column;
    gap: 8px;
  }

  /* FLOW ARROW */
  .arrow {
    display: flex;
    justify-content: center;
    align-items: center;
    height: 32px;
    color: var(--muted);
    font-size: 20px;
    position: relative;
  }

  .arrow::before {
    content: '';
    position: absolute;
    left: 50%;
    top: 0;
    bottom: 0;
    width: 2px;
    background: linear-gradient(to bottom, transparent, var(--border), transparent);
  }

  /* LAYER CARD */
  .layer {
    border: 1px solid var(--border);
    border-radius: 12px;
    background: var(--surface);
    overflow: hidden;
    transition: border-color 0.2s;
    cursor: pointer;
  }

  .layer:hover { border-color: var(--accent); }
  .layer:hover .layer-header { background: rgba(249,115,22,0.06); }

  .layer-header {
    display: flex;
    align-items: center;
    gap: 14px;
    padding: 16px 20px;
    border-bottom: 1px solid var(--border);
    transition: background 0.2s;
  }

  .layer-num {
    font-family: var(--mono);
    font-size: 11px;
    color: var(--muted);
    min-width: 24px;
  }

  .layer-icon {
    font-size: 22px;
    min-width: 28px;
    text-align: center;
  }

  .layer-title {
    font-size: 16px;
    font-weight: 600;
    flex: 1;
  }

  .layer-tech {
    font-family: var(--mono);
    font-size: 11px;
    color: var(--muted);
    background: var(--bg);
    border: 1px solid var(--border);
    padding: 3px 10px;
    border-radius: 20px;
  }

  .layer-body {
    padding: 16px 20px 20px 62px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
  }

  .layer-body.single { grid-template-columns: 1fr; }
  .layer-body.triple { grid-template-columns: 1fr 1fr 1fr; }

  .card {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 12px 14px;
  }

  .card-title {
    font-size: 12px;
    font-weight: 600;
    color: var(--text);
    margin-bottom: 6px;
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .card-title .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    flex-shrink: 0;
  }

  .dot-orange { background: var(--accent); }
  .dot-blue   { background: var(--accent2); }
  .dot-green  { background: var(--accent3); }
  .dot-purple { background: var(--accent4); }

  .card p {
    font-size: 12px;
    color: var(--muted);
    line-height: 1.6;
  }

  .card code {
    font-family: var(--mono);
    font-size: 11px;
    background: rgba(249,115,22,0.1);
    color: var(--accent);
    padding: 1px 5px;
    border-radius: 3px;
  }

  /* Special: classification layers */
  .classif-layers {
    display: flex;
    flex-direction: column;
    gap: 6px;
    grid-column: 1 / -1;
  }

  .classif-row {
    display: flex;
    align-items: stretch;
    gap: 8px;
  }

  .classif-label {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--muted);
    writing-mode: horizontal-tb;
    display: flex;
    align-items: center;
    min-width: 48px;
    padding-right: 4px;
  }

  .classif-card {
    flex: 1;
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 10px 14px;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .classif-card .badge {
    font-family: var(--mono);
    font-size: 10px;
    padding: 2px 8px;
    border-radius: 20px;
    flex-shrink: 0;
  }

  .badge-orange { background: rgba(249,115,22,0.15); color: var(--accent); border: 1px solid rgba(249,115,22,0.3); }
  .badge-blue   { background: rgba(59,130,246,0.15); color: var(--accent2); border: 1px solid rgba(59,130,246,0.3); }
  .badge-purple { background: rgba(168,85,247,0.15); color: var(--accent4); border: 1px solid rgba(168,85,247,0.3); }

  .classif-card p {
    font-size: 12px;
    color: var(--muted);
    line-height: 1.5;
  }

  /* Storage section */
  .storage-row {
    display: flex;
    gap: 8px;
    grid-column: 1 / -1;
  }

  .storage-item {
    flex: 1;
    background: var(--bg);
    border: 1px dashed var(--border);
    border-radius: 8px;
    padding: 12px 14px;
    text-align: center;
  }

  .storage-item .s-icon { font-size: 20px; margin-bottom: 6px; }
  .storage-item .s-name { font-family: var(--mono); font-size: 12px; color: var(--text); margin-bottom: 4px; }
  .storage-item .s-desc { font-size: 11px; color: var(--muted); }

  /* Legend */
  .legend {
    max-width: 900px;
    margin: 32px auto 0;
    display: flex;
    gap: 20px;
    flex-wrap: wrap;
    padding: 16px 20px;
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 10px;
  }

  .legend-title {
    font-family: var(--mono);
    font-size: 11px;
    color: var(--muted);
    width: 100%;
    margin-bottom: 4px;
    letter-spacing: 2px;
    text-transform: uppercase;
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 12px;
    color: var(--muted);
  }

  .legend-dot {
    width: 8px; height: 8px; border-radius: 50%;
  }

  /* Section divider label */
  .divider-label {
    display: flex;
    align-items: center;
    gap: 10px;
    margin: 16px 0 8px;
  }

  .divider-label span {
    font-family: var(--mono);
    font-size: 10px;
    color: var(--muted);
    letter-spacing: 2px;
    text-transform: uppercase;
    white-space: nowrap;
  }

  .divider-line {
    flex: 1;
    height: 1px;
    background: var(--border);
  }

  @media (max-width: 600px) {
    .layer-body { grid-template-columns: 1fr; }
    .layer-body.triple { grid-template-columns: 1fr; }
    .storage-row { flex-direction: column; }
  }
</style>
</head>
<body>

<header>
  <div class="tag">Arquitetura do Projeto</div>
  <h1>Expenses <span>Classifier</span></h1>
  <p class="subtitle">VisÃ£o geral do sistema antes de comeÃ§ar a codar â€” revise e aprove cada camada</p>
</header>

<div class="diagram">

  <!-- LAYER 1: INGESTION -->
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">01</span>
      <span class="layer-icon">ğŸ“¥</span>
      <span class="layer-title">IngestÃ£o</span>
      <span class="layer-tech">pandas Â· openpyxl Â· pdfplumber</span>
    </div>
    <div class="layer-body">

      <div class="card" style="grid-column: 1 / -1;">
        <div class="card-title"><span class="dot dot-orange"></span> Formatos aceitos</div>
        <div style="display:flex; gap:8px; margin-top:8px; flex-wrap:wrap;">
          <span style="font-family:var(--mono);font-size:11px;background:rgba(34,197,94,0.1);color:var(--accent3);border:1px solid rgba(34,197,94,0.3);padding:3px 10px;border-radius:20px;">âœ“ CSV</span>
          <span style="font-family:var(--mono);font-size:11px;background:rgba(34,197,94,0.1);color:var(--accent3);border:1px solid rgba(34,197,94,0.3);padding:3px 10px;border-radius:20px;">âœ“ XLS</span>
          <span style="font-family:var(--mono);font-size:11px;background:rgba(34,197,94,0.1);color:var(--accent3);border:1px solid rgba(34,197,94,0.3);padding:3px 10px;border-radius:20px;">âœ“ XLSX</span>
          <span style="font-family:var(--mono);font-size:11px;background:rgba(249,115,22,0.1);color:var(--accent);border:1px solid rgba(249,115,22,0.3);padding:3px 10px;border-radius:20px;">âš  PDF (melhor esforÃ§o)</span>
        </div>
      </div>

      <div class="card">
        <div class="card-title"><span class="dot dot-orange"></span> LÃ³gica de leitura por formato</div>
        <p style="line-height:1.8">
          <code>CSV</code> â†’ pandas direto<br>
          <code>XLS/XLSX</code> â†’ openpyxl + pandas<br>
          <code>PDF</code> â†’ pdfplumber tenta extrair tabelas; se falhar, avisa vocÃª e pede para converter manualmente em CSV/XLSX
        </p>
      </div>

      <div class="card">
        <div class="card-title"><span class="dot dot-orange"></span> NormalizaÃ§Ã£o</div>
        <p>Tudo vira o mesmo formato: <code>data</code> Â· <code>descriÃ§Ã£o</code> Â· <code>valor</code> Â· <code>tipo</code> Â· <code>origem</code> Â· <code>moeda</code></p>
      </div>

    </div>
  </div>

  <div class="arrow">â†“</div>

  <!-- LAYER 1B: HUMAN IMPORT VALIDATION -->
  <div class="layer" style="border-color: rgba(59,130,246,0.4);">
    <div class="layer-header" style="background: rgba(59,130,246,0.04);">
      <span class="layer-num">01b</span>
      <span class="layer-icon">ğŸ”</span>
      <span class="layer-title">ValidaÃ§Ã£o da ImportaÃ§Ã£o</span>
      <span class="layer-tech">Streamlit Â· revisÃ£o humana</span>
    </div>
    <div class="layer-body">
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> PrÃ©via antes de salvar</div>
        <p>Antes de qualquer dado ir para o banco, vocÃª vÃª uma tabela com as primeiras linhas importadas para confirmar que a leitura estÃ¡ correta: datas, valores e descriÃ§Ãµes fazem sentido?</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> AÃ§Ãµes disponÃ­veis</div>
        <p>
          <strong style="color:var(--accent3)">âœ“ Confirmar</strong> â€” salva no banco e segue para classificaÃ§Ã£o<br><br>
          <strong style="color:var(--accent)">âœ— Rejeitar</strong> â€” descarta e exibe mensagem de erro orientando a conversÃ£o manual
        </p>
      </div>
    </div>
  </div>

  <div class="arrow">â†“</div>

  <!-- LAYER 2: CLASSIFICATION -->
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">02</span>
      <span class="layer-icon">ğŸ·ï¸</span>
      <span class="layer-title">ClassificaÃ§Ã£o</span>
      <span class="layer-tech">regras + LLM</span>
    </div>
    <div class="layer-body single">
      <div class="classif-layers">

        <div class="classif-row">
          <div class="classif-card">
            <span class="badge badge-orange">1Âª camada</span>
            <p><strong style="color:var(--text)">Motor de Regras</strong> â€” Regex simples. Ex: "IFOOD" â†’ Restaurante, "UBER" â†’ Transporte. Resolve ~70% das transaÃ§Ãµes. RÃ¡pido e explicÃ¡vel.</p>
          </div>
        </div>

        <div class="classif-row">
          <div class="classif-card">
            <span class="badge badge-purple">2Âª camada</span>
            <p><strong style="color:var(--text)">LLM Fallback</strong> â€” Para o que as regras nÃ£o pegam: descriÃ§Ãµes bagunÃ§adas, compras internacionais, lanÃ§amentos raros. Usa a API do Claude com saÃ­da estruturada.</p>
          </div>
        </div>

      </div>

      <div class="card" style="margin-top: 4px;">
        <div class="card-title"><span class="dot dot-green"></span> Categorias (em portuguÃªs)</div>
        <p>Moradia Â· Mercado Â· Transporte Â· Restaurantes Â· SaÃºde Â· Assinaturas Â· EducaÃ§Ã£o Â· Viagens Â· TransferÃªncias Â· Outros</p>
      </div>
    </div>
  </div>

  <div class="arrow">â†“</div>

  <!-- LAYER 3: HUMAN REVIEW -->
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">03</span>
      <span class="layer-icon">ğŸ‘€</span>
      <span class="layer-title">RevisÃ£o Humana</span>
      <span class="layer-tech">Streamlit</span>
    </div>
    <div class="layer-body">
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> Tela de RevisÃ£o</div>
        <p>Lista de transaÃ§Ãµes pendentes com sugestÃ£o de categoria e botÃµes rÃ¡pidos para aprovar ou corrigir.</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> Loop de Aprendizado</div>
        <p>Cada correÃ§Ã£o sua vira uma nova regra. A ferramenta pergunta: "criar regra para NETFLIX â†’ Assinaturas?"</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> GestÃ£o de Regras</div>
        <p>Tela para ver, editar e ativar/desativar as regras existentes.</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> Dashboard Mensal</div>
        <p>GrÃ¡ficos simples de gasto por categoria. Filtro por mÃªs e conta.</p>
      </div>
    </div>
  </div>

  <div class="arrow">â†“</div>

  <!-- LAYER 3B: REGIME -->
  <div class="layer" style="border-color: rgba(168,85,247,0.4);">
    <div class="layer-header" style="background: rgba(168,85,247,0.04);">
      <span class="layer-num">03b</span>
      <span class="layer-icon">ğŸ“…</span>
      <span class="layer-title">Regime ContÃ¡bil</span>
      <span class="layer-tech">caixa Â· competÃªncia</span>
    </div>
    <div class="layer-body">

      <div class="card" style="grid-column: 1 / -1;">
        <div class="card-title"><span class="dot dot-purple"></span> Duas formas de ver o mesmo gasto</div>
        <p style="line-height:1.8">Cada transaÃ§Ã£o armazena <strong style="color:var(--text)">duas datas</strong> e o sistema deixa vocÃª escolher qual perspectiva quer em cada visualizaÃ§Ã£o ou relatÃ³rio.</p>
      </div>

      <div class="card">
        <div class="card-title"><span class="dot dot-purple"></span> ğŸ’µ Regime de Caixa</div>
        <p style="line-height:1.8">
          Mostra <strong style="color:var(--text)">quando o dinheiro saiu da sua conta</strong> de verdade.<br><br>
          CartÃ£o de crÃ©dito â†’ data do vencimento da fatura<br>
          Parcela â†’ data de cada desembolso<br><br>
          <em style="color:var(--muted)">Ideal para: Fluxo de Caixa</em>
        </p>
      </div>

      <div class="card">
        <div class="card-title"><span class="dot dot-purple"></span> ğŸ“Š Regime de CompetÃªncia</div>
        <p style="line-height:1.8">
          Mostra <strong style="color:var(--text)">quando o gasto aconteceu de fato</strong>.<br><br>
          CartÃ£o de crÃ©dito â†’ data da compra<br>
          Parcela â†’ valor total na data da compra<br><br>
          <em style="color:var(--muted)">Ideal para: DRE, BalanÃ§o Patrimonial</em>
        </p>
      </div>

      <div class="card" style="grid-column: 1 / -1;">
        <div class="card-title"><span class="dot dot-purple"></span> Como o sistema lida com parcelas</div>
        <p style="line-height:1.8">
          O extrato pode vir de formas diferentes dependendo do banco. A ferramenta tenta detectar automaticamente. O que nÃ£o conseguir, vocÃª preenche na tela de validaÃ§Ã£o da importaÃ§Ã£o.<br><br>
          <strong style="color:var(--text)">Extrato mostra cada parcela separada</strong> (ex: "Parcela 2/6 â€” R$50") â†’ sistema agrupa e reconstrÃ³i o gasto original<br>
          <strong style="color:var(--text)">Extrato mostra sÃ³ o total</strong> (ex: "Compra â€” R$300 / 6x") â†’ sistema detecta o padrÃ£o e cria as parcelas futuras automaticamente
        </p>
      </div>

      <div class="card" style="grid-column: 1 / -1; border-color: rgba(168,85,247,0.3);">
        <div class="card-title"><span class="dot dot-purple"></span> ğŸ—“ï¸ Diferimento de Despesa (Despesas Antecipadas)</div>
        <p style="line-height:1.8; margin-bottom: 10px;">
          Para gastos pagos de uma vez mas com competÃªncia distribuÃ­da no tempo â€” como antivÃ­rus anual, OneDrive, seguro, etc.
        </p>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:10px;">
          <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:10px;">
            <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:4px;">ğŸ’µ No Caixa</p>
            <p>Aparece integralmente no mÃªs em que vocÃª pagou. Ex: R$120 em janeiro.</p>
          </div>
          <div style="background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:10px;">
            <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:4px;">ğŸ“Š Na CompetÃªncia</p>
            <p>DistribuÃ­do pelo perÃ­odo que vocÃª definir. Ex: R$10/mÃªs por 12 meses.</p>
          </div>
        </div>
        <div style="margin-top:10px;background:var(--bg);border:1px solid var(--border);border-radius:6px;padding:10px;">
          <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:6px;">âš™ï¸ Como funciona na prÃ¡tica</p>
          <p style="line-height:1.8">
            Na tela de revisÃ£o, vocÃª vÃª o gasto e decide marcar como <code>diferir</code>.<br>
            VocÃª define: <strong style="color:var(--text)">data de inÃ­cio</strong> + <strong style="color:var(--text)">data de fim</strong> (ou nÃºmero de meses).<br>
            O sistema divide o valor igualmente e cria as competÃªncias mensais automaticamente.<br>
            O saldo ainda nÃ£o apropriado fica registrado como <strong style="color:var(--text)">ativo (despesa prÃ©-paga)</strong> no BalanÃ§o Patrimonial.
          </p>
        </div>
      </div>

    </div>
  </div>

  <div class="arrow">â†“</div>

  <!-- LAYER 4: STORAGE -->
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">04</span>
      <span class="layer-icon">ğŸ’¾</span>
      <span class="layer-title">Armazenamento</span>
      <span class="layer-tech">SQLite</span>
    </div>
    <div class="layer-body single">
      <div class="storage-row">
        <div class="storage-item">
          <div class="s-icon">ğŸ“‹</div>
          <div class="s-name">transacoes.db</div>
          <div class="s-desc">TransaÃ§Ãµes com data do gasto + data do desembolso</div>
        </div>
        <div class="storage-item">
          <div class="s-icon">ğŸ”¢</div>
          <div class="s-name">parcelas.db</div>
          <div class="s-desc">Compras parceladas com cada desembolso futuro mapeado</div>
        </div>
        <div class="storage-item">
          <div class="s-icon">ğŸ—“ï¸</div>
          <div class="s-name">diferimentos.db</div>
          <div class="s-desc">Despesas antecipadas com perÃ­odo e competÃªncias mensais geradas</div>
        </div>
        <div class="storage-item">
          <div class="s-icon">ğŸ“</div>
          <div class="s-name">regras.json</div>
          <div class="s-desc">Motor de regras regex â€” editÃ¡vel pelo Streamlit</div>
        </div>
        <div class="storage-item">
          <div class="s-icon">ğŸª</div>
          <div class="s-name">merchants.db</div>
          <div class="s-desc">Cadastro de estabelecimentos â†’ categoria padrÃ£o</div>
        </div>
      </div>
    </div>
  </div>

  <div class="arrow">â†“</div>

  <!-- LAYER 5: EXPORT -->
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">05</span>
      <span class="layer-icon">ğŸ“¤</span>
      <span class="layer-title">VisualizaÃ§Ã£o & ExportaÃ§Ã£o</span>
      <span class="layer-tech">pandas Â· openpyxl</span>
    </div>
    <div class="layer-body">
      <div class="card">
        <div class="card-title"><span class="dot dot-green"></span> Seletor de regime</div>
        <p>Em qualquer tela, vocÃª escolhe visualizar por <strong style="color:var(--text)">Caixa</strong> ou por <strong style="color:var(--text)">CompetÃªncia</strong>. O sistema recalcula tudo automaticamente.</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-green"></span> CSV / Excel</div>
        <p>Exportar por mÃªs ou perÃ­odo, com todas as categorias e regime escolhido jÃ¡ aplicados.</p>
      </div>
      <div class="card" style="grid-column: 1 / -1;">
        <div class="card-title"><span class="dot dot-green"></span> Demonstrativos financeiros (fases futuras)</div>
        <div style="display:grid; grid-template-columns:1fr 1fr; gap:12px; margin-top:10px;">
          <div>
            <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:4px;">ğŸ“Š DRE</p>
            <p>Receitas vs Despesas por categoria e perÃ­odo. Regime de competÃªncia.</p>
          </div>
          <div>
            <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:4px;">ğŸ’µ Fluxo de Caixa</p>
            <p>Entradas e saÃ­das reais de dinheiro por data de desembolso. Regime de caixa.</p>
          </div>
          <div>
            <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:4px;">âš–ï¸ BalanÃ§o Patrimonial</p>
            <p>Ativos, passivos e patrimÃ´nio lÃ­quido. Parcelas futuras entram como passivo.</p>
          </div>
          <div>
            <p style="color:var(--text);font-size:12px;font-weight:600;margin-bottom:4px;">ğŸ¯ OrÃ§amento vs Realizado</p>
            <p>Quanto vocÃª planejou gastar por categoria vs o que realmente aconteceu.</p>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>

<!-- LEGEND -->
<div class="legend">
  <div class="legend-title">Legenda de tecnologias</div>
  <div class="legend-item"><span class="legend-dot" style="background:var(--accent)"></span> Python 3.11 â€” linguagem base</div>
  <div class="legend-item"><span class="legend-dot" style="background:var(--accent2)"></span> Streamlit â€” interface visual</div>
  <div class="legend-item"><span class="legend-dot" style="background:var(--accent3)"></span> pandas â€” manipulaÃ§Ã£o de dados</div>
  <div class="legend-item"><span class="legend-dot" style="background:var(--accent4)"></span> Claude API â€” LLM fallback</div>
  <div class="legend-item"><span class="legend-dot" style="background:var(--muted)"></span> SQLite â€” banco de dados local</div>
  <div class="legend-item"><span class="legend-dot" style="background:#f59e0b"></span> openpyxl â€” leitura de XLS/XLSX</div>
  <div class="legend-item"><span class="legend-dot" style="background:#ec4899"></span> pdfplumber â€” extraÃ§Ã£o de PDF</div>
</div>

<!-- FOLDER STRUCTURE -->
<div class="diagram" style="margin-top: 32px;">
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">ğŸ“</span>
      <span class="layer-icon"></span>
      <span class="layer-title">Estrutura de Pastas</span>
      <span class="layer-tech">proposta</span>
    </div>
    <div class="layer-body single">
      <div class="card">
        <pre style="font-family: var(--mono); font-size: 12px; color: var(--muted); line-height: 1.9;">
<span style="color:var(--accent)">Expenses Classifier/</span>
â”œâ”€â”€ <span style="color:var(--accent2)">app.py</span>                 â† ponto de entrada do Streamlit
â”œâ”€â”€ <span style="color:var(--accent2)">requirements.txt</span>       â† pandas, openpyxl, pdfplumber, streamlit...
â”‚
â”œâ”€â”€ <span style="color:var(--accent3)">data/</span>
â”‚   â”œâ”€â”€ extratos/          â† seus CSVs ficam aqui
â”‚   â””â”€â”€ exports/           â† relatÃ³rios gerados
â”‚
â”œâ”€â”€ <span style="color:var(--accent3)">db/</span>
â”‚   â”œâ”€â”€ transacoes.db      â† transaÃ§Ãµes (data gasto + data desembolso)
â”‚   â”œâ”€â”€ parcelas.db        â† compras parceladas e desembolsos futuros
â”‚   â”œâ”€â”€ diferimentos.db    â† despesas antecipadas e competÃªncias mensais
â”‚   â””â”€â”€ merchants.db       â† merchants cadastrados
â”‚
â”œâ”€â”€ <span style="color:var(--accent3)">rules/</span>
â”‚   â””â”€â”€ regras.json        â† motor de regras editÃ¡vel
â”‚
â””â”€â”€ <span style="color:var(--accent3)">src/</span>
    â”œâ”€â”€ ingestion.py       â† lÃª CSV, XLS, XLSX e PDF
    â”œâ”€â”€ classifier.py      â† regras + LLM fallback
    â”œâ”€â”€ installments.py    â† detecta e mapeia parcelas
    â”œâ”€â”€ deferral.py        â† diferimento de despesas antecipadas
    â”œâ”€â”€ regime.py          â† caixa vs competÃªncia
    â”œâ”€â”€ learning.py        â† salva correÃ§Ãµes como regras
    â””â”€â”€ exporter.py        â† gera CSV/Excel e demonstrativos</pre>
      </div>
    </div>
  </div>
</div>

<!-- BUILD ORDER -->
<div class="diagram" style="margin-top: 32px;">
  <div class="layer">
    <div class="layer-header">
      <span class="layer-num">ğŸ—“ï¸</span>
      <span class="layer-icon"></span>
      <span class="layer-title">Ordem de ConstruÃ§Ã£o (MVP)</span>
      <span class="layer-tech">recomendada</span>
    </div>
    <div class="layer-body triple">
      <div class="card">
        <div class="card-title"><span class="dot dot-orange"></span> Semana 1</div>
        <p>IngestÃ£o CSV/XLS/XLSX + validaÃ§Ã£o humana da importaÃ§Ã£o + salvar no SQLite. <strong style="color:var(--text)">Meta:</strong> ver suas transaÃ§Ãµes em tabela na tela.</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-blue"></span> Semana 2</div>
        <p>Motor de regras + classificaÃ§Ã£o + tela Streamlit de revisÃ£o. <strong style="color:var(--text)">Meta:</strong> aprovar/corrigir categorias na interface.</p>
      </div>
      <div class="card">
        <div class="card-title"><span class="dot dot-green"></span> Semana 3</div>
        <p>DetecÃ§Ã£o de parcelas + regime caixa vs competÃªncia + LLM fallback + exportaÃ§Ã£o. <strong style="color:var(--text)">Meta:</strong> MVP completo com as duas visÃµes funcionando.</p>
      </div>
    </div>
  </div>
</div>

</body>
</html>
